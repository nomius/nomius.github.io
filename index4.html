<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>David's Website</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link href="css/cover.css" rel="stylesheet">
        <link href="css/vim.css" rel="stylesheet">
    </head>

    <body>
        <div class="site-wrapper">
            <div class="site-wrapper-inner">
                <div class="cover-container">
                    <div class="masthead clearfix">
                        <div class="inner">
                            <h3 class="masthead-brand">David's Website</h3>
                            <ul class="nav masthead-nav">
								<li class="active"><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="articles.html">Articles</a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects<span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
<li><a href="https://github.com/nomius/misctools">misctools</a></li>
<li><a href="https://github.com/nomius/ntunnel">ntunnel</a></li>
<li><a href="https://github.com/nomius/kpkg">kpkg</a></li>
<li><a href="https://github.com/nomius/ktsuss">ktsuss</a></li>
<li><a href="https://github.com/nomius/dmemory">dmemory</a></li>
<li><a href="https://github.com/nomius/nqqueue">nqqueue</a></li>
<li><a href="https://github.com/nomius/mttools">mttools</a></li>
<li><a href="http://www.kworg.org">Kwort</a></li>
</ul></li>
<li><a href="links.html">Links</a></li>

                            </ul>
                        </div>
                    </div>

                    <div class="inner cover">
                        <br>
                        <br><br><h3>Margins in Openbox</h3><h6>Posted on: Jan 2007</h6><p>Last month I started using openbox to create an easy to use desktop for programmers. Everything was nice, but I wanted to use yabb with adesklets, and then ipager... Everything was nice when I launched those applications/applets, but when I maximize a window, it was over the applet.
There are some applets where that is ok, like the weather applet, but that wasn't right for a panel (like yabb) or a pager like ipager (this last one should set struts).
The solution was margins, Xfwm4 has it and other several wm (like metacity and sawfish) has it too. So I wrote a small patch to give to openbox margins.
I was very happy with it, and gave it to other users to try it (thanks gregf in irc://irc.oftc.net/slackware who tested it for a while, and who stills using it), so I made the submition in openbox's bugzilla. But guess what... The patch was rejected, and the bugzilla entry closed and deleted.
The answer of the developer was:
It's up to the pager/panel to set properties called struts. Openbox properly
respects those and doesn't maximize over them.</p>

<p>Which is great... I mean... Follow standards, that's good... But applets does not set struts, and sometimes the users just wants margins.
So anyways, the patch is here for everyone who wants to use it. Just has to apply it and set the margins in the configuration file like this:</p>

<pre><code>&lt;margin&gt;
    &lt;top&gt;px&lt;/top&gt;
    &lt;bottom&gt;px&lt;/bottom&gt;
    &lt;left&gt;px&lt;/left&gt;
    &lt;right&gt;px&lt;/right&gt;
&lt;/margin&gt;
</code></pre>

<p>So here's the patch: <a href="http://nomius.github.io/content/patches/openbox-3.3.1-margins.patch">http://nomius.github.io/content/patches/openbox-3.3.1-margins.patch</a></p>

<hr width="60%">
<h3>TTYsnoop fixes</h3><h6>Posted on: Dec 2006</h6><p>I started using ttysnoop (it's like a vnc for consoles) at work but there was so troubles while compiling, so this patch fixes errors, warnings and adds things to Makefile to make it more flexible and able to compile the program itself, read the comments in the patch for a more detailed information.
And please, if someone finds Carl Declerck's email (another than carl[@]miskatonic[.]inbe[.]net), send this patch to him or drop a comment here reporting me his real mail, since I couldn't send him the patch because his email address doesn't exists anymore. </p>

<p>If you want to start using it you'll probably want to apply this patch.</p>

<p>I leave you the link here:</p>

<p><a href="http://nomius.github.io/content/patches/ttysnoop-0.12c-fixes.patch">http://nomius.github.io/content/patches/ttysnoop-0.12c-fixes.patch</a></p>

<hr width="60%">
<h3>Issues in xfce4-mount-plugin</h3><h6>Posted on: Dec 2006</h6><p>I planed to add xfce4-mount-plugin to Kwort's panel, but there was some things to fix and to change.</p>

<p>The first patch fixes some issues with some file systems which shouldn't be shown, like tmpfs and root partition. I mean, those shouldn't be displayed, since the users should not mount or umount it.</p>

<p><a href="http://nomius.github.io/content/patches/xfce4-mount-plugin-0.4.7-noroot-notmpfs.patch">http://nomius.github.io/content/patches/xfce4-mount-plugin-0.4.7-noroot-notmpfs.patch</a></p>

<p>This patch is for the same plugin, but is just for behavior. It just make the plugin to not display the device block since the user is not interested on it but where the data will be displayed.</p>

<p><a href="http://nomius.github.io/content/patches/xfce4-mount-plugin-0.4.7-no-block-device.patch">http://nomius.github.io/content/patches/xfce4-mount-plugin-0.4.7-no-block-device.patch</a></p>

<p>I mailed Jean Baptiste Dulong to change it, but he's not maintaining the plugin anymore, so who knows who should I send the patch. :P</p>

<hr width="60%">
<h3>Has to be the Brazilian Air (GNU bc readline patch)</h3><h6>Posted on: Nov 2006</h6><p>The same day I wrote the patch for Xdialog's extra button feature (when I was in Rio de Janeiro - Brazil) I found a little bug in the GNU bc using readline.
The bug actually is very simple, there was a wrong prototype declaration of the extern function readline. The prompt argument, according to readline(3) from GNU, is a const char *, not a char *.
So bc didn't even compile if you wanted to use readline (which actually is very good). I must think that eveyone uses bc without readline, so nobody saw that error.
Anyways, I wrote the patch and send it to Phil Nelson (author of GNU bc), and he thank me for it.</p>

<p>I don't know when bc is gonna be updated so I don't know either when the patch will be included. So, for now, you'll have to download it from here and apply it manually.</p>

<p><a href="http://nomius.github.io/content/patches/bc-1.06-readline-const-char.patch">http://nomius.github.io/content/patches/bc-1.06-readline-const-char.patch</a></p>

<hr width="60%">
<h3>Today zenity... Tomorrow who knows... Conquer the world maybe" ;)</h3><h6>Posted on: Oct 2006</h6><p>I was trying to make some visual scripts for Kwort Linux. I tried Xdialog but wasn't very nice. So I give a look at zenity (which I already did 2 years ago).
So the screenshots and its flexibility was amazing, there was just one thing... It needed gnome-canvas, which requiere half gnome's dependencies.
Then I started to look into the code to see if there's a way to get rid of canvas package. After few minutes I realised that canvas was only needed in about dialog; this is not a post with criticism to the zenity developers, who I think they made an excelent job with it, but add a new dependency just to draw their's about dialog wasn't the smartest thing.
I know they use it to fit the gnome's look &amp; feel, but use canvas just for an about dialog was kind of silly, with it you only get gnome users (which unfortunally is the gnome's development idea, but I know that you guys want to do the right thing in the right way :D).</p>

<p>So today I wrote a patch to drop the libgnome-canvas package as dependency. Now Xfce users and everyone else not using gnome can install zenity without installing half gnome. :)</p>

<p>Anyways, I leave you the patch:
<a href="http://nomius.github.io/content/patches/zenity-no-canvas.patch">http://nomius.github.io/content/patches/zenity-no-canvas.patch</a></p>

<hr width="60%">
<h3>Patch for Xdialog (Yes! Made in Brasil)</h3><h6>Posted on: Oct 2006</h6><p>Ok, ok, ok... I know I was in vacations, but the day wasn't very pretty, and I felt like taking a coding time. :D</p>

<p>Some weeks ago I wrote a small plugin for Xfce to configure the network in Kwort Linux; I was going to use Zenity, but then I saw again Xdialog and surprise... GTK2 based interface!</p>

<p>Well... Nowadays a program which keeps being maintained using gtk1 is something very weird. So I decided to use Xdialog. The problem was when I needed an extra button... Dialog provides that feature, but Xdialog didn't and I really needed it.</p>

<p>So I mailed Thierry Godefroy asking him if he didn't had a patch which provides that feature... I guess he was very, very occupied, because he didn't even answered.</p>

<p>When I saw the code the first time some weeks ago I said "This will be hard to understand to implement it by myself", and today when I started to look at the code it wasn't that hard. So some hours latter I understanded the code and started to write some things...</p>

<p>So, this is what this command:</p>

<pre><code>Xdialog --stdout --extra-button --extra-label "Extra Button" --inputbox "Type your input. Hit Extra Button to get 3 as return value" 0 0
</code></pre>

<p>will show:</p>

<p><img src="http://photos1.blogger.com/blogger2/288/3652/400/xdialog-button-extra-patch.png" alt="Xdialog extra button" /></p>

<p>So... Here's the patch, I hope someone finds it useful like me:</p>

<p><a href="http://nomius.github.io/content/patches/Xdialog-2.3.1-patch-extra-button.patch">http://nomius.github.io/content/patches/Xdialog-2.3.1-patch-extra-button.patch</a></p>

<hr width="60%">
<h3>Something interesting</h3><h6>Posted on: Sep 2006</h6><p>This is kind of "off topic" but I see this interesting:</p>

<blockquote>
  <p>Start with a cage containing five monkeys. Inside the cage, hang a banana over a set of stairs. Before long, a monkey will go to the stairs and climb toward the banana. As soon as he touches the stairs, spray the other monkeys with cold water.</p>
  
  <p>After a while, another monkey makes an attempt with the same result--the other monkeys are sprayed with cold water. Pretty soon, when any monkey tries to climb the stairs, the other monkeys will try to prevent it.</p>
  
  <p>Now, put away the cold water. Remove one monkey from the cage and replace him with a new one. The new monkey sees the banana and wants to climb the stairs. To the monkey's surprise, all the other monkeys attack him. After another attempt and attack, he knows that if he tries to climb the stairs, he'll be assaulted.</p>
  
  <p>Next, remove another of the original five monkeys and replace him with a new one. The new comer goes to the stairs and is attacked. The previous new comer takes part in the punishment with enthusiasm! Likewise, replace a third original monkey with a new one, then a fourth, then the fifth. Every time the newest monkey takes to the stairs, he is attacked.
  Advertisement</p>
  
  <p>Most of the monkeys that are beating him have no idea why they weren't permitted to climb the stairs or why they're participating in the beating of the newest monkey.</p>
  
  <p>After replacing all the original monkeys, none of the remaining monkeys have ever been sprayed with cold water. Nevertheless, no monkey ever again approaches the stairs to try for the banana. Why not? Because as far as they know, that's the way it's always been done around here.</p>
</blockquote>

<hr width="60%">
<h3>Here we go again with sqwebmail</h3><h6>Posted on: Sep 2006</h6><p>I really hate when this happens. I released a sqwebmail vacations mode patch just two weeks ago... And guess what... Today browsing the net I found a new sqwebmail version.
Fortunally no big changes in the code so I adapted the patch in a few minutes.
I modify the this patch to make it compatible with both versions (5.1.2 and 5.1.3), I don't know if it works in older versions.</p>

<p>Ok, here I leave you the patch:</p>

<p><a href="http://nomius.github.io/content/patches/sqwebmail-5.1.3-vacations-mode.patch">http://nomius.github.io/content/patches/sqwebmail-5.1.3-vacations-mode.patch</a></p>

<hr width="60%">
<h3>An easy to do samba scanner</h3><h6>Posted on: Sep 2006</h6><p>I wrote this simple script to find public samba shared resources. Windows by default leave some "open resources" that normally you can access mounting it or with some samba tools. So, the thing is: How do I find public resources in a network? This is what I did:</p>

<pre><code>#!/usr/bin/env bash

function scan(){
   SUBNET=${1}
   LAST=${2}
   PING="$(which ping) -c 1 -W 1"
   ${PING} ${SUBNET}.${LAST} &gt; /dev/null 2&gt;&amp;1
   if [ $? -eq 0 ]; then
       SMBRESOURCES=$(smbclient -N -L ${SUBNET}.${LAST} 2&gt;/dev/null | grep Disk | grep -v \\$)
       if [ ! -z "${SMBRESOURCES}" ]; then
           tput setaf 2
           echo -e "Public samba resources in ${SUBNET}.${LAST}:"
           tput setaf 1
           echo "${SMBRESOURCES}"
           echo -e "------------------------------------------------------\n"
           tput sgr0
       else
           tput setaf 3
           echo "${SUBNET}.${LAST} is up, but doesn't have public resources"
           echo -e "------------------------------------------------------\n"
           tput sgr0
       fi
   fi
}

if [ -z ${2} ]; then
  for((x=1;x&lt;255;x++)); do
      ${0} ${1} ${x} &amp;
  done
else
  scan ${1} ${2}
fi
wait

#EOF
</code></pre>

<hr width="60%">
<h3>Patch to provide features to sqwebmail</h3><h6>Posted on: Aug 2006</h6><p>Recently I've been working with qmail+vpopmail+sqwebmail+courier-imap+...+a lot of things at work.
Sqwebmail has a nice code style, but unfortunally it isn't docummented at all, so for all of us that don't belong to the project itself is very painful. In addition, the way they've done some things can really piss off someone. Not to mention that it's extremely un-extensible. So adding a new feature involves understanding and modifying the whole source code.
Anyway, vacations mode is only implemented through qmailadmin, which is good, but users should use only one web interface, and that interface should be sqwebmail.</p>

<p>So anyways, let's cut off the story and show you some code:</p>

<p><a href="http://nomius.github.io/content/patches/sqwebmail-5.1.2-vacations-mode.patch">http://nomius.github.io/content/patches/sqwebmail-5.1.2-vacations-mode.patch</a></p>

<hr width="60%">

                    </div>

                    <div class="mastfoot">
                        <div class="inner">
                        	<br>
							<table style="width:100%"><tr><td></td><td align="right"><a href="index3.html">Next posts</a></td></tr></table><br>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    </body>
</html>
